/*
 * File: app/view/mygridpanel2.js
 *
 * This file was generated by Sencha Architect version 2.2.1.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.mygridpanel2', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.mygridpanel2',

    id: 'mygridpanel2',
    store: 'cultData',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            features: [
                {
                    ftype: 'grouping',
                    groupHeaderTpl: Ext.create('Ext.XTemplate', 
                        '{columnName}: {name}',
                        {
                            Date: function(data) {
                                var today = Ext.Date.clearTime(new Date()),
                                    todayTime = today.getTime(),
                                    dueDateTime;

                                if(!date) {
                                    return '(No Date)';
                                }
                                dueDateTime = Ext.Date.clearTime(date).getTime();
                                if(dueDateTime === todayTime) {
                                    return 'Today';
                                }
                                if(dueDateTime > todayTime) {
                                    if(dueDateTime === Ext.Date.add(today, Ext.Date.DAY, 1).getTime()) {
                                        // due date is current date + 1 day
                                        return 'Tomorrow';
                                    }
                                    if(dueDateTime < Ext.Date.add(today, Ext.Date.DAY, 7).getTime()) {
                                        // if the due date is less than one week in the future, return the day of the week.
                                        return Ext.Date.format(date, 'l');
                                    }
                                } else {
                                    if(dueDateTime === Ext.Date.add(today, Ext.Date.DAY, -1).getTime()) {
                                        // due date is current date - 1 day.
                                        return 'Yesterday';
                                    }
                                    if(dueDateTime > Ext.Date.add(today, Ext.Date.DAY, -7).getTime()) {
                                        // if the due date is less than one week past, return 'Last' + the day of the week.
                                        return 'Last '+ Ext.Date.format(date, 'l');
                                    }
                                }
                                return date.getFullYear() === today.getFullYear() ? Ext.Date.format(date, 'D m/d') : Ext.Date.format(date, 'D m/d/Y');

                            }
                        }
                    )
                }
            ],
            columns: [
                {
                    xtype: 'datecolumn',
                    dataIndex: 'date',
                    text: 'วันที่'
                },
                {
                    xtype: 'gridcolumn',
                    width: 118,
                    dataIndex: 'transaction',
                    text: 'ประเภทรายการ'
                },
                {
                    xtype: 'gridcolumn',
                    dataIndex: 'deposit',
                    text: 'ยอดเงิน'
                },
                {
                    xtype: 'gridcolumn',
                    width: 146,
                    dataIndex: 'tellerId',
                    text: 'หมายเลขผู้ทำรายการ'
                },
                {
                    xtype: 'gridcolumn',
                    dataIndex: 'id',
                    text: 'รายการที่'
                },
                {
                    xtype: 'gridcolumn',
                    dataIndex: 'bookBank',
                    text: 'ชื่อธนาคาร'
                },
                {
                    xtype: 'gridcolumn',
                    dataIndex: 'accountNumber',
                    text: 'เลขที่บัญชี'
                },
                {
                    xtype: 'actioncolumn',
                    sortable: true,
                    altText: '',
                    items: [
                        {
                            handler: function(view, rowIndex, colIndex, item, e, record, row) {



                                var rec = view.getRecords(view.getNodes())[rowIndex];

                                this.fireEvent('itemclick', this, 'addd',  view, rowIndex, colIndex, item, e,record,row);
                            },
                            icon: 'http://b.dryicons.com/images/icon_sets/luna_blue_icons/png/128x128/edit.png',
                            tooltip: 'edit'
                        },
                        {
                            handler: function(view, rowIndex, colIndex, item, e, record, row) {


                                this.fireEvent('itemclick', this, 'delete', view, rowIndex, colIndex, item, e,record,row);

                            },
                            icon: 'http://a.dryicons.com/images/icon_sets/luna_blue_icons/png/128x128/delete.png',
                            tooltip: 'detete'
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    }

});